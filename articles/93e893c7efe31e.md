---
title: "SORACOM Lagoonã®ãƒ‡ãƒ¼ã‚¿ã‚’å¹³æ»‘åŒ–ã™ã‚‹"
emoji: "ğŸ“ˆ"
type: "tech"
topics:
  - "soracom"
published: true
published_at: "2023-04-04 11:10"
---

# ã‚„ã‚ŠãŸã„ã“ã¨
SORACOM Harvest Dataã®ãƒ‡ãƒ¼ã‚¿ã‚’SORACOM Lagoonã§å¯è¦–åŒ–ã™ã‚‹æ™‚
ã“ã†ã„ã†ã‚¸ãƒ£ãƒŸã‚¸ãƒ£ãƒŸã®ãƒ‡ãƒ¼ã‚¿ã‚’
![](https://storage.googleapis.com/zenn-user-upload/19c584e010ba-20230404.png)

ç§»å‹•å¹³å‡ã§å¹³æ»‘åŒ–ã™ã‚‹
![](https://storage.googleapis.com/zenn-user-upload/92c65a980e90-20230404.png)

ãŸã ã—ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯ã„ã˜ã‚ŠãŸããªã„ã®ã§Lagoonã®æ©Ÿèƒ½ã ã‘ã§å®Ÿç¾ã™ã‚‹

# æº–å‚™ï¼ˆå‰æï¼‰
1. SORACOM Harvest Dataã«ãƒ‡ãƒ¼ã‚¿ã‚’è²¯ã‚ã‚‹
https://users.soracom.io/ja-jp/docs/harvest/send-data/
â€»ã¾ã ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ãŒä½¿ãˆã‚‹ã®ã§å¿…é ˆã§ã¯ãªã„

1. SORACOM Lagoon "v2" ã®åˆ©ç”¨ã‚’é–‹å§‹ã™ã‚‹
https://users.soracom.io/ja-jp/docs/lagoon-v2/getting-started/
â€»Freeãƒ—ãƒ©ãƒ³ã§ã‚‚OKã§ã™

# æ‰‹é †

1. ãƒ‘ãƒãƒ«ã‚’è¿½åŠ 
![](https://storage.googleapis.com/zenn-user-upload/4c8a8bbde9ed-20230404.png)

1. Add an empty panel(å·¦ä¸Šï¼‰ã‚’é¸æŠ
![](https://storage.googleapis.com/zenn-user-upload/eea947b9fe46-20230404.png)

1. Panelã‚¿ãƒ–ã®Visualizationã¯Graphï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
![](https://storage.googleapis.com/zenn-user-upload/2bddbbf14042-20230404.png)

1. Queryã‚¿ãƒ–ã§å¹³æ»‘åŒ–ã—ãŸã„ï¼ˆã‚¸ãƒ£ãƒŸã‚¸ãƒ£ãƒŸã®ï¼‰ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠ
![](https://storage.googleapis.com/zenn-user-upload/d5516aeaca8b-20230404.png)
Demoã®temperatureã¯ç¨‹ã‚ˆãã‚¸ãƒ£ãƒŸã£ã¦ã„ã¦ã€ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/6c20dcff5e3e-20230404.png)

1. Expressionã‚’è¿½åŠ ã—ã¾ã™
![](https://storage.googleapis.com/zenn-user-upload/3b880a8c01a8-20230404.png)
â€»Warningã®é€šã‚Š "Experimental feature: queries could stop working in next version"ã§ã™ã€‚

1. Operation ã§Resampleã‚’è¿½åŠ ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/ab2cdf88b1e2-20230404.png)

1. inputã« "A"(å…ˆã»ã©è¿½åŠ ã—ãŸã‚¸ãƒ£ãƒŸã‚¸ãƒ£ãƒŸã®ãƒ‡ãƒ¼ã‚¿)ã‚’é¸æŠ
![](https://storage.googleapis.com/zenn-user-upload/47ffcd5edeb4-20230404.png)

1. å¹³æ»‘åŒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é¸æŠã—ã¾ã™
ã€€Resample to:ã€€ä»Šå›ã¯ç§»å‹•å¹³å‡ã®å¹³å‡æ™‚é–“ã‚’è¨­å®šã—ã¾ã™ã€‚
ã€€ã€€ex.) 3m(3åˆ†ã®ç§»å‹•å¹³å‡), 10mï¼ˆ10åˆ†ã®ç§»å‹•å¹³å‡ï¼‰
ã€€Downsampleï¼šã€€ä»Šå›ã¯ç§»å‹•å¹³å‡ã‚’ã—ãŸã„ã®ã§ "Mean" ã‚’è¨­å®šã—ã¾ã™ã€‚
ã€€Upsampleï¼šåˆ‡ã‚Œç›®ãªãæç”»ã§ãã‚‹ã®ã§ã€"backfilling"ã‚’è¨­å®šã—ã¾ã™ã€‚ï¼ˆç§»å‹•å¹³å‡æ™‚é–“ã¶ã‚“ã®ãƒ‡ãƒ¼ã‚¿ãŒè¶³ã‚Šãªã„åˆ†ã®ç«¯ã£ã“ã‚’ã©ã†å‡¦ç†ã™ã‚‹ã‹ï¼‰
 
 è¨­å®šä¾‹![](https://storage.googleapis.com/zenn-user-upload/c32111d28481-20230404.png)

 ç·¨é›†ã—ãŸã‚‰ç›®ã®ãƒœã‚¿ãƒ³![](https://storage.googleapis.com/zenn-user-upload/80490ca40a86-20230404.png)ã‚’2å›ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å¤‰æ›´ãŒåæ˜ ã•ã‚Œã‚‹

 ã“ã†ãªã‚Šã¾ã™ã€‚![](https://storage.googleapis.com/zenn-user-upload/ad6f886eb366-20230404.png)

## ä»•ä¸Šã’ï¼ˆè›‡è¶³ï¼‰
1. ã‚°ãƒ©ãƒ•ã®ç³»åˆ—åãŒBã«ãªã£ã¡ã‚ƒã£ã¦ã„ã‚‹ã®ã§ä¸Šæ›¸ãã™ã‚‹![](https://storage.googleapis.com/zenn-user-upload/dae3353a7e78-20230404.png)
é‰›ç­†ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦
![](https://storage.googleapis.com/zenn-user-upload/d4305b2a228a-20230404.png)
ç›´æ¥ç·¨é›†ï¼ˆ"smoothed"ã«ã™ã‚‹ï¼‰
![](https://storage.googleapis.com/zenn-user-upload/90ca17aef1a5-20230404.png)
ç·¨é›†ã—ãŸã‚‰ç›®ã®ãƒœã‚¿ãƒ³![](https://storage.googleapis.com/zenn-user-upload/80490ca40a86-20230404.png)ã‚’2å›ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å¤‰æ›´ãŒåæ˜ ã•ã‚Œã‚‹

2. å¹³æ»‘åŒ–ã—ãŸã‚°ãƒ©ãƒ•ã¯ç·šã®ä¸‹ã‚’åŠé€æ˜ã®è‰²ã§fillã—ãªãã¦ã„ã„ã®ã§å¤–ã™ï¼ˆãŠå¥½ã¿ã§ï¼‰
Panelã‚¿ãƒ–ã‚’ãã‚Šãã‚Šã‚„ã£ã¦ä¸‹ã¸ç§»å‹•ã—
![](https://storage.googleapis.com/zenn-user-upload/ad456baf4343-20230404.png)
â†“
â†“
"Series orverrides"ã‚’è¦‹ã¤ã‘ã¦é–‹ã
![](https://storage.googleapis.com/zenn-user-upload/009046210b55-20230404.png)

3. é–‹ã„ãŸã‚‰Alias or regexã«smoothed(è¿½åŠ ã—ãŸExpressionï¼‰ã‚’é¸ã¶
![](https://storage.googleapis.com/zenn-user-upload/ce23cfcf36ef-20230404.png)

4. "+"ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦
![](https://storage.googleapis.com/zenn-user-upload/8c0d465fea77-20230404.png)

5. Line fillã‚’0ã«
![](https://storage.googleapis.com/zenn-user-upload/cb689a8dccbb-20230404.png)
 
å¹³æ»‘åŒ–ã—ãŸã‚°ãƒ©ãƒ•ã‚ªãƒ¬ãƒ³ã‚¸åŠé€æ˜ã®å¡—ã‚Šã¤ã¶ã—ãŒæ¶ˆãˆã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/b958cc730909-20230404.png)

6. ã“ã‚Œã ã¨ç·šãŒç´°ã„ã®ã§å¤ªãã—ã¾ã™
å…ˆã»ã©ã®è¨­å®šã«è¿½åŠ ã—ã¦Line Widthã‚’èª¿æ•´ã—ã¾ã™
![](https://storage.googleapis.com/zenn-user-upload/f7405c64d67c-20230404.png)

å¤ªããªã‚Šã¾ã—ãŸ
![](https://storage.googleapis.com/zenn-user-upload/45cfe213ddf7-20230404.png)

1.ã€€å¤ªãã—ãŸç·šã®è‰²ã‚’å¤‰ãˆãŸã„å ´åˆã¯ã“ã“ã§
![](https://storage.googleapis.com/zenn-user-upload/a63859ce72f4-20230404.png)

åŒç³»è‰²ã«ã™ã‚‹ã¨ã‚ªã‚·ãƒ£ãƒ¬ã§ã™
![](https://storage.googleapis.com/zenn-user-upload/69190c039b14-20230404.png)

# QA
## csvã§å¹³æ»‘åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã›ã‚‹ã®ã‹ï¼Ÿ
å–ã‚Šå‡ºã›ã¾ã™ã€‚
ãƒ‘ãƒãƒ«ã‚¿ã‚¤ãƒˆãƒ«æ¨ªã®ä¸‹å‘ãã®ãã®å­—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ã€Œinspectã€â†’ã€ŒDataã€
![](https://storage.googleapis.com/zenn-user-upload/be5e05471855-20230412.png)

ã€ŒData optionsã€ã‚’é–‹ã„ã¦ã€show data frameã®ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã§smoothedã‚’é¸æŠã—ã¦æ°´è‰²ã®Download CSVãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/2e140d980808-20230412.png)
