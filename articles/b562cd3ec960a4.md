---
title: "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®SORACOM å†å…¥é–€ãƒãƒ³ã‚ºã‚ªãƒ³"
emoji: "ğŸ’¬"
type: "tech"
topics:
  - "soracom"
published: true
published_at: "2023-07-07 07:26"
---

# ã¯ã˜ã‚ã«
SORACOM ã®SIMã¾ãŸã¯ãƒãƒ¼ãƒãƒ£ãƒ«SIMã•ãˆã‚ã‚Œã°åˆ©ç”¨å¯èƒ½ã¨ãªã‚‹ä¾¿åˆ©ãªIoTãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ã‚’ãƒãƒ³ã‚ºã‚ªãƒ³ã§å‹•ã‹ã—ãªãŒã‚‰ã€æ”¹ã‚ã¦SORACOMã®ä»•çµ„ã¿ã‚’ç†è§£ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

# 1. SORACOM Arcã§SORACOMã«æ¥ç¶šã™ã‚‹
Virtual SIM/Subscriberã‚’ä½œæˆã—ã¦ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆçµŒç”±ã§SORACOMãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«æ¥ç¶šã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/7e60cd913f27-20230707.png)
## 1.1ã€€Virtual SIMã®ä½œæˆãƒ»SORACOMã¸ã®æ¥ç¶š
Virtual SIMã®ä½œæˆæ–¹æ³•ã€€SORACOMãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¸ã®æ¥ç¶šæ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

## 1.1 ãƒ‘ã‚¿ãƒ¼ãƒ³A. soratunã«ã‚ˆã‚‹æ¥ç¶šï¼ˆmac/Linuxå‘ã‘ï¼‰
![](https://storage.googleapis.com/zenn-user-upload/aa8b66edda87-20230707.png)
### soratunã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã“ã¡ã‚‰ã®æ‰‹é †ã§ã”è‡ªèº«ã®PCã®OS,ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ã£ãŸsoratunã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
https://users.soracom.io/ja-jp/docs/arc/install-soratun/

### soratunã§virtualSIM/subscriberã‚’ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ã™ã‚‹
ã“ã¡ã‚‰ã®æ‰‹é †ã§ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ï¼ˆ=ãƒãƒ¼ãƒãƒ£ãƒ«SIMsubscriberã®ä½œæˆã¨ã€PCã¸ã®é…ç½®ï¼‰ã‚’è¡Œã„ã¾ã™
https://users.soracom.io/ja-jp/docs/arc/bootstrap-authkey/

```$ sudo soratun up --config /path/to/arc.json```
ã¾ã§å®Ÿè¡Œã§ããŸã‚‰æ¥ç¶šå®Œäº†ã§ã™ï¼

ã¤ã„ã§ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ãƒãƒ¼ãƒãƒ£ãƒ«SIMãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†

## 1.1 ãƒ‘ã‚¿ãƒ¼ãƒ³B. wireguardã«ã‚ˆã‚‹æ¥ç¶šï¼ˆwindowså‘ã‘ï¼‰
![](https://storage.googleapis.com/zenn-user-upload/2cc0ef99ad06-20230707.png)
### wireguardã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã‹ã‚‰windowså‘ã‘ã®wireguardã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
https://www.wireguard.com/install/

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§virtualSIM/subscriberã‚’ä½œæˆã™ã‚‹
ã“ã¡ã‚‰ã®æ‰‹é †ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ãƒãƒ¼ãƒãƒ£ãƒ«lSIM/subscriberã‚’ä½œæˆã—ã¾ã™.
(ãƒ—ãƒ©ã‚¤ãƒãƒªã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒãƒ¼ãƒãƒ£ãƒ« SIM/Subscriberã‚’ä½œæˆ)
https://users.soracom.io/ja-jp/docs/arc/create-virtual-sim/


### ãƒˆãƒ³ãƒãƒ«ã®ç·¨é›†
ãƒˆãƒ³ãƒãƒ«ã‚’è¿½åŠ ã—ã¾ã™
![](https://storage.googleapis.com/zenn-user-upload/e21b00f6f1b2-20230707.png)

### æ¥ç¶šæƒ…å ±ã®å…¥åŠ›


### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æœ‰åŠ¹åŒ–
![](https://storage.googleapis.com/zenn-user-upload/5be70934a5fe-20230707.png)



## 1.2 æ¥ç¶šã®ç¢ºèª
`pong.soracom.io`ã¨ã„ã†ã€SORACOMãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«æ¥ç¶šã—ã¦ã„ãªã„ã¨ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦pingã‚’æ‰“ã£ã¦ã¿ã¾ã™
```
ping -n 3 pong.soracom.io
```

soratunã‚’åœæ­¢/wireguardç„¡åŠ¹åŒ–ã—ã¦æ¥ç¶šã§ããªã„ã“ã¨ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†

# 2. ãƒ‡ãƒã‚¤ã‚¹ãƒªãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŒæ–¹å‘é€šä¿¡ä½“é¨“
ä»Šå›ã¯ãƒ‡ãƒã‚¤ã‚¹ãƒªãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŒæ–¹å‘é€šä¿¡ã‚’ä½“é¨“ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/b94ec4272f87-20230707.png)
![](https://storage.googleapis.com/zenn-user-upload/631d0559a345-20230707.png)
## 2.1 ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚µãƒ¼ãƒ“ã‚¹ã®æ´»ç”¨
### 2.1.1 ä½œæˆã—ãŸãƒãƒ¼ãƒãƒ£ãƒ«SIMã‚’ã‚°ãƒ«ãƒ¼ãƒ—ã«å…¥ã‚Œã‚‹
SIMã‚’é¸æŠã—ã¦æ‰€å±ã‚°ãƒ«ãƒ¼ãƒ—å¤‰æ›´ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/2488714b90b6-20230707.png)

ä»Šå›ã¯æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†
![](https://storage.googleapis.com/zenn-user-upload/6914b3779b82-20230707.png)

### 2.1.2 ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹
ã“ã¡ã‚‰ã®æ‰‹é †ã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®šã—ã¾ã™ã€‚
https://users.soracom.io/ja-jp/docs/air/use-metadata/#%e3%83%a1%e3%82%bf%e3%83%87%e3%83%bc%e3%82%bf%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9%e3%82%92%e8%a8%ad%e5%ae%9a%e3%81%99%e3%82%8b

ã“ã®ã¨ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«å¥½ããªæ–‡å­—ã‚’å…¥ã‚Œã¦ã¿ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/0b8c9cd1db2c-20230707.png)
ä¿å­˜ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

### 2.1.3 ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹
SORACOMãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«æ¥ç¶šã—ãŸçŠ¶æ…‹ã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†
```
curl -s http://metadata.soracom.io/v1/userdata
```

å…ˆã»ã©è¨˜è¼‰ã—ãŸãƒ‡ãƒ¼ã‚¿ãŒè¿”ã£ã¦ãã‚Œã°æˆåŠŸã§ã™ã€‚

## 2.2 SORACOM Harvest Filesã®æ´»ç”¨
ä»Šå›ã¯SORACOM Harvest Filesã§ã€ãƒ‡ãƒã‚¤ã‚¹ã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®é€ã‚Šè¾¼ã¿ã‚’ä½“é¨“ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/064456e82e20-20230707.png)
### 2.2.1 SORACOM Harvest Filesã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
ä»¥ä¸‹ã®æ‰‹é †ã§SORACOM Harvest Files ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™
https://users.soracom.io/ja-jp/docs/harvest/enable-files/

ä»¥ä¸‹ã®æ‰‹é †ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ä»»æ„ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™
https://users.soracom.io/ja-jp/docs/harvest/send-files/#%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%82%b3%e3%83%b3%e3%82%bd%e3%83%bc%e3%83%ab%e3%81%a7%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%82%92-harvest-files-%e3%81%ab%e3%82%a2%e3%83%83%e3%83%97%e3%83%ad%e3%83%bc%e3%83%89%e3%81%99%e3%82%8b

### 2.2.2 SORACOM Harvest Filesã‹ã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
SORACOMãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«æ¥ç¶šã—ãŸçŠ¶æ…‹ã§SORACOM Harvest Fileã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã¾ã—ã‚‡ã†

```
curl -O http://harvest-files.soracom.io/path/to/filename
```
`path/to/filename`ã€€ã¯ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ãŸä¿å­˜å…ˆã§ã™ã€‚


# 3. TCP ãƒã‚¤ãƒŠãƒªã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿é€ä¿¡
ä»Šå›ã¯Unified endpoint -> ãƒã‚¤ãƒŠãƒªãƒ‘ãƒ¼ã‚µãƒ¼ã€€-> SORACOM Harvest Dataã®çµŒè·¯ã§ã®ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã‚’ä½“é¨“ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/da5ddabd4a2a-20230707.png)
## 3.1 Unified endpointã«ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹
ä»¥ä¸‹ã®æ‰‹é †ã§SORACOM Harvest Dataã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™
https://users.soracom.io/ja-jp/docs/harvest/enable-data/

unifiedã€€endpointã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã«TCPã§ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•ã’ã¦ã¿ã¾ã™ã€‚
(10203040ã‚’char[]ã§é€ä¿¡ã—ã¾ã™ã€‚ï¼‰
```
nc -v unified.soracom.io 23080
10203040
```


## 3.2 SORACOM Harvest Dataã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
ã“ã¡ã‚‰ã®æ‰‹é †ã§ç¢ºèªã—ã¾ã™ã€‚
https://users.soracom.io/ja-jp/docs/harvest/visualize/

## 3.ï¼“ ãƒã‚¤ãƒŠãƒªãƒ‘ãƒ¼ã‚µãƒ¼ã‚’è¨­å®šã™ã‚‹
ãƒ‡ãƒ¼ã‚¿ã‚’ï¼‘ï¼ã€ï¼’ï¼ã€ï¼“ï¼ã€ï¼”ï¼ã«åˆ†è§£ã™ã‚‹ãŸã‚ã®å‘ªæ–‡ã‚’è¨­å®šã—ã¾ã™ã€‚
```
param1:0:char:2 param2:2:char:2 param3:4:char:2 param4:6:char:2
```
å‘ªæ–‡ã®ä»•æ§˜ï¼š
https://users.soracom.io/ja-jp/docs/binary-parser/custom-format/

ã“ã¡ã‚‰ã®æ‰‹é †ã§è¨­å®šã—ã¦ã„ãã¾ã™ã€‚
https://users.soracom.io/ja-jp/docs/binary-parser/usage/

â€»å¿…è¦ã«å¿œã˜ã¦binary parser playgroundã‚’ä½¿ã£ã¦ãƒ‡ãƒãƒƒã‚°ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™
https://binary-parser-playground.soracom.io/

## 3.ï¼” SORACOM Harvest Dataã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
å†ã³ã“ã¡ã‚‰ã®æ‰‹é †ã§ç¢ºèªã—ã¾ã™ã€‚
https://users.soracom.io/ja-jp/docs/harvest/visualize/

ä»¥ä¸Š
ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼